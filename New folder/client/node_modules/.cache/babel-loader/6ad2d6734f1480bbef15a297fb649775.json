{"ast":null,"code":"import _slicedToArray from\"C:/Users/USER/Desktop/emp/EmployeeManagement/New folder/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link,useNavigate}from\"react-router-dom\";import DataTable from'react-data-table-component';import{useState}from'react';import Axios from'axios';import moment from\"moment\";import React,{useEffect}from\"react\";import{BsFillCaretLeftFill}from\"react-icons/bs\";import{BsFillCaretRightFill}from\"react-icons/bs\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ExpandedComponent=function ExpandedComponent(_ref){var data=_ref.data;return/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown_detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown_personaldet\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"datastaffname\",children:data.staff_name}),/*#__PURE__*/_jsx(\"h6\",{className:\"mx-3\",children:data.gender}),/*#__PURE__*/_jsx(\"h6\",{children:data.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown_personaldetail\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"datastaffname\",children:data.address}),/*#__PURE__*/_jsx(\"h6\",{children:moment(data.dob).format('DD-MMMM-YYYY')})]})]});};function Salarylist(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),salaryList=_useState2[0],setsalaryList=_useState2[1];var _useState3=useState(moment().format(\"YYYY-MM-DDT00:00:00+00:00\")),_useState4=_slicedToArray(_useState3,2),attendmonth=_useState4[0],setattendmonth=_useState4[1];var PreviousmonthChange=function PreviousmonthChange(){var decmonth=moment(attendmonth).subtract(1,\"month\").format(\"YYYY-MM-DDT00:00:00+00:00\");getEmployees();setattendmonth(decmonth);};var NextmonthChange=function NextmonthChange(){var decmonth=moment(attendmonth).add(1,\"month\").format(\"YYYY-MM-DDT00:00:00+00:00\");getEmployees();setattendmonth(decmonth);};var firstdate=moment(attendmonth,\"YYYY-MM\").startOf(\"month\").format(\"YYYY-MM-DDT00:00:00+00:00\");var lastdate=moment(attendmonth,\"YYYY-MM\").endOf(\"month\").format(\"YYYY-MM-DDT00:00:00+00:00\");var getEmployees=function getEmployees(){Axios.get(\"http://localhost:3001/salary/\".concat(firstdate,\"/\").concat(lastdate)).then(function(response){setsalaryList(response.data);});};useEffect(function(){getEmployees();});var salarygenereate=function salarygenereate(e){// let arr = e.target.value.split(',')\nvar staffidd=e.target.value;localStorage.setItem('staffid',staffidd);navigator('/GenerateSalary');};// let ageSum = 0\n// for (let i = 0; i <= salaryList.length; i++) {\n//   ageSum += salaryList[i].salary\n// }\n// console.log(\"ageSum------4444444------\"+ageSum);\nvar columns=[{name:'Id',selector:function selector(row){return row.id;},sortable:true},{name:'Staff Name',selector:function selector(row){return row.staff_name;},sortable:true},{name:'Salary',selector:function selector(row){return row.salary;},sortable:true},{name:'Current Salary',selector:function selector(row){return row.total;},sortable:true},{name:'Action',selector:function selector(row){return/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-secondary\",value:row.id,onClick:row.salary===null||row.salary===0||row.salary==='0'// && row.total != null || row.total != ''\n?{undefined:undefined}:salarygenereate,children:row.total===null||row.total===''||row.total==='0'?'Generate salary':'Generated'});},sortable:false}];var navigator=useNavigate();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"main\",{role:\"main\",className:\"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4 salarylistbox_table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom salarylistbody_table\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h1\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Salary Management\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-toolbar mb-2 mb-md-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"btn-group mr-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/Salary_history\",className:\"nav-link\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-secondary\",children:\"Salary Summary\"})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"monthname_sort \",children:[/*#__PURE__*/_jsx(BsFillCaretLeftFill,{onClick:PreviousmonthChange}),/*#__PURE__*/_jsx(\"h4\",{className:\"monthname_text\",children:moment(attendmonth).format(\"MMMM-YYYY\")}),/*#__PURE__*/_jsx(BsFillCaretRightFill,{onClick:NextmonthChange})]}),/*#__PURE__*/_jsx(DataTable,{columns:columns,data:salaryList,pagination:true,expandableRows:true,expandableRowsComponent:ExpandedComponent})]})})})});}export default Salarylist;","map":{"version":3,"names":["Link","useNavigate","DataTable","useState","Axios","moment","React","useEffect","BsFillCaretLeftFill","BsFillCaretRightFill","ExpandedComponent","data","staff_name","gender","city","address","dob","format","Salarylist","props","salaryList","setsalaryList","attendmonth","setattendmonth","PreviousmonthChange","decmonth","subtract","getEmployees","NextmonthChange","add","firstdate","startOf","lastdate","endOf","get","then","response","salarygenereate","e","staffidd","target","value","localStorage","setItem","navigator","columns","name","selector","row","id","sortable","salary","total","undefined"],"sources":["C:/Users/USER/Desktop/emp/EmployeeManagement/New folder/client/src/Mycomponent/salary.js"],"sourcesContent":["import { Link, useNavigate } from \"react-router-dom\";\r\nimport DataTable from 'react-data-table-component';\r\nimport {  useState } from 'react';\r\nimport Axios from 'axios';\r\nimport moment from \"moment\";\r\nimport React,{useEffect} from \"react\";\r\nimport { BsFillCaretLeftFill } from \"react-icons/bs\";\r\nimport { BsFillCaretRightFill } from \"react-icons/bs\";\r\n\r\nconst ExpandedComponent = ({ data }) => <div className=\"dropdown_detail\">\r\n<div className=\"dropdown_personaldet\">\r\n<h6 className=\"datastaffname\">{data.staff_name}</h6>\r\n<h6 className=\"mx-3\">{data.gender}</h6>\r\n<h6>{data.city}</h6>\r\n</div>\r\n<div className=\"dropdown_personaldetail\">\r\n<h6 className=\"datastaffname\">{data.address}</h6>\r\n<h6>{moment(data.dob).format('DD-MMMM-YYYY')}</h6>\r\n</div>\r\n</div>;\r\nfunction Salarylist(props) {\r\n  const [salaryList, setsalaryList] = useState([]);\r\n  const [attendmonth, setattendmonth] = useState(\r\n    moment().format(`YYYY-MM-DDT00:00:00+00:00`)\r\n  );\r\n  const PreviousmonthChange = () => {\r\n    let decmonth = moment(attendmonth)\r\n      .subtract(1, \"month\")\r\n      .format(`YYYY-MM-DDT00:00:00+00:00`);\r\n    getEmployees();\r\n    setattendmonth(decmonth);\r\n   \r\n  };\r\n\r\n  const NextmonthChange = () => {\r\n    let decmonth = moment(attendmonth)\r\n      .add(1, \"month\")\r\n      .format(`YYYY-MM-DDT00:00:00+00:00`);\r\n\r\n    getEmployees();\r\n    setattendmonth(decmonth);\r\n \r\n  };\r\n\r\n\r\n  let firstdate = moment(attendmonth, \"YYYY-MM\")\r\n    .startOf(\"month\")\r\n    .format(`YYYY-MM-DDT00:00:00+00:00`);\r\n  let lastdate = moment(attendmonth, \"YYYY-MM\")\r\n    .endOf(\"month\")\r\n    .format(`YYYY-MM-DDT00:00:00+00:00`);\r\n  const getEmployees = () => {\r\n   \r\n    Axios.get(`http://localhost:3001/salary/${firstdate}/${lastdate}`).then((response) => {\r\n      setsalaryList(response.data);\r\n    });\r\n  \r\n  };\r\n  useEffect(() => {\r\n    getEmployees();\r\n  });\r\n  const salarygenereate =(e)=>{\r\n    // let arr = e.target.value.split(',')\r\n  let staffidd = e.target.value;\r\n  localStorage.setItem('staffid',staffidd);\r\n  navigator('/GenerateSalary')\r\n  }\r\n \r\n  // let ageSum = 0\r\n  // for (let i = 0; i <= salaryList.length; i++) {\r\n  //   ageSum += salaryList[i].salary\r\n  // }\r\n  // console.log(\"ageSum------4444444------\"+ageSum);\r\n\r\n  const columns = [\r\n    {\r\n      name: 'Id',\r\n      selector: row => row.id,\r\n      sortable: true,\r\n  },\r\n \r\n    {\r\n        name: 'Staff Name',\r\n        selector: row => row.staff_name,\r\n        sortable: true,\r\n    },\r\n    {\r\n      \r\n        name: 'Salary',\r\n        selector: row => row.salary,\r\n        sortable: true,\r\n    },\r\n    {\r\n      name: 'Current Salary',\r\n      selector: row => row.total,\r\n      sortable: true,\r\n  },\r\n    {\r\n      name: 'Action',\r\n      selector: row => <button className=\"btn btn-sm btn-outline-secondary\" value={row.id} onClick={(row.salary === null || row.salary === 0 || row.salary === '0') \r\n      // && row.total != null || row.total != ''\r\n       ?  {undefined}\r\n      :salarygenereate}>{(row.total === null || row.total === '' || row.total === '0')  ? 'Generate salary' : 'Generated'}</button>,\r\n      sortable: false,\r\n\r\n  },\r\n];\r\nconst navigator=useNavigate();\r\n\r\n\r\n\r\n  return (\r\n\r\n    <>\r\n        {/* <Header/> */}\r\n      <div className=\"container-fluid\">\r\n\r\n        <div className=\"row\">\r\n          {/* <Sidebar/> */}\r\n\r\n          <main role=\"main\" className=\"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4 salarylistbox_table\">\r\n            <div className=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom salarylistbody_table\">\r\n              <h1 className=\"h1\"><b>Salary Management</b></h1>\r\n              <div className=\"btn-toolbar mb-2 mb-md-0\">\r\n                <div className=\"btn-group mr-2\">\r\n                <Link to='/Salary_history' className=\"nav-link\">\r\n\r\n                  <button className=\"btn btn-sm btn-outline-secondary\">Salary Summary</button>\r\n                </Link>\r\n                 \r\n                </div>\r\n                \r\n              </div>\r\n            </div>\r\n           \r\n            \r\n\r\n            <div className=\"monthname_sort \">\r\n                  <BsFillCaretLeftFill onClick={PreviousmonthChange} />\r\n                  <h4 className=\"monthname_text\">\r\n                    {moment(attendmonth).format(\"MMMM-YYYY\")}\r\n                  </h4>\r\n                  <BsFillCaretRightFill onClick={NextmonthChange} />\r\n                </div>\r\n            <DataTable\r\n            columns={columns}\r\n            data={salaryList}\r\n            pagination\r\n            expandableRows\r\n            expandableRowsComponent={ExpandedComponent}\r\n          \r\n        />\r\n          </main>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Salarylist;"],"mappings":"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"},"metadata":{},"sourceType":"module"}